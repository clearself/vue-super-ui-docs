import{C as F,l as p,P as e,A as u,D as C,F as m,G as _,M as B,V as A,T as f,d as D,H as M}from"./chunks/XYZ.ZtkXeE91.js";import{O as v}from"./chunks/OSM.yU6afTZH.js";import{d as P,a as k,o as T,e as o,f as g,E as r,aF as q,$ as w,g as E,j as O,V as y}from"./chunks/framework.54wzUQT-.js";const h="projection",d="coordinateFormat";class j extends F{constructor(s){s=s||{};const i=document.createElement("div");i.className=s.className!==void 0?s.className:"ol-mouse-position",super({element:i,render:s.render,target:s.target}),this.on,this.once,this.un,this.addChangeListener(h,this.handleProjectionChanged_),s.coordinateFormat&&this.setCoordinateFormat(s.coordinateFormat),s.projection&&this.setProjection(s.projection),this.renderOnMouseOut_=s.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?s.placeholder:"&#160;",this.renderedHTML_=i.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=s.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(d)}getProjection(){return this.get(h)}handleMouseMove(s){const i=this.getMap();this.updateHTML_(i.getEventPixel(s))}handleMouseOut(s){this.updateHTML_(null)}setMap(s){if(super.setMap(s),s){const i=s.getViewport();this.listenerKeys.push(p(i,e.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(p(i,e.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(s){this.set(d,s)}setProjection(s){this.set(h,u(s))}updateHTML_(s){let i=this.placeholder_;if(s&&this.mapProjection_){if(!this.transform_){const n=this.getProjection();n?this.transform_=C(this.mapProjection_,n):this.transform_=m}const a=this.getMap().getCoordinateFromPixelInternal(s);if(a){if(this.transform_(a,a),this.wrapX_){const c=this.getProjection()||this.mapProjection_;_(a,c)}const n=this.getCoordinateFormat();n?i=n(a):i=a.toString()}}(!this.renderedHTML_||i!==this.renderedHTML_)&&(this.element.innerHTML=i,this.renderedHTML_=i)}render(s){const i=s.frameState;i?this.mapProjection_!=i.viewState.projection&&(this.mapProjection_=i.viewState.projection,this.transform_=null):this.mapProjection_=null}}const S=j,b={class:"map-example"},x=P({__name:"mousePosition",setup(l){const s=k(),i=k();return T(()=>{new B({view:new A({center:[12579156,3274244],zoom:12}),layers:[new f({source:new v})],controls:D({attributionOptions:{collapsible:!0}}).extend([new S({coordinateFormat:M(3),projection:"EPSG:4326",target:i.value})]),target:s.value})}),(t,a)=>(o(),g("div",b,[r("div",{ref_key:"map",ref:s,class:"map"},null,512),r("div",{ref_key:"position",ref:i,class:"position"},null,512)]))}}),V=q(x,[["__scopeId","data-v-82f72db0"]]),L=y("",2),N=y("",1),$=JSON.parse('{"title":"openlayers 鼠标位置","description":"","frontmatter":{},"headers":[],"relativePath":"docs/框架/openlayers示例/地图控件/鼠标位置.md","filePath":"docs/框架/openlayers示例/地图控件/鼠标位置.md","lastUpdated":1716277301000}'),H={name:"docs/框架/openlayers示例/地图控件/鼠标位置.md"},G=Object.assign(H,{setup(l){return(s,i)=>{const t=w("ClientOnly");return o(),g("div",null,[L,E(t,null,{default:O(()=>[E(V)]),_:1}),N])}}});export{$ as __pageData,G as default};
